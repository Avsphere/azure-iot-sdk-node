<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: service/lib/device.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    <h1 class="page-title">Source: service/lib/device.js</h1>
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE file in the project root for full license information.
'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
var _ = require("lodash");
/**
 * @deprecated
 * @class           module:azure-iothub.Device
 * @classdesc       Creates a representation of a device for use in the
 *                  identity {@link module:azure-iothub.Registry} APIs.
 * @param {String}  jsonData        An optional JSON representation of the
 *                                  device, which will be mapped to properties
 *                                  in the object. If no argument is provided,
 *                                  Device roperties will be assigned default
 *                                  values.
 * @prop {String}   deviceId        Unique device identifier
 * @prop {String}   generationId    Used to disambiguate devices that have been
 *                                  deleted/recreated with the same `deviceId`
 * @prop {String}   etag            Weak entity tag assigned to this device
 *                                  identity description
 * @prop {String}   connectionState Whether the device is 'connected' or
 *                                  'disconnected'
 * @prop {String}   status          'enabled' (device authorized to connect,
 *                                  can send/receive messages) or 'disabled'
 * @prop {String}   statusReason    128-character string set when the device is
 *                                  disabled
 * @prop {String}   connectionStateUpdatedTime  Timestamp representing the last
 *                                  time `connectionState` changed
 * @prop {String}   statusUpdatedTime Timestamp representing the last time
 *                                  `status` changed
 * @prop {String}   lastActivityTime  Timestamp representing the last time the
 *                                  device authenticated, sent a message, or
 *                                  received a message
 * @prop {String}   cloudToDeviceMessageCount Number of c2d messages waiting to
 *                                  by delivered to the device
 * @prop {Object}   authentication  Contains the symmetric keys used to
 *                                  authenticate this device
 */
/*Codes_SRS_NODE_SERVICE_DEVICE_16_001: [The constructor shall accept a `null` or `undefined` value as argument and create an empty `Device` object.]*/
var Device = (function () {
    function Device(jsonData) {
        this.deviceId = null;
        this.generationId = null;
        this.etag = null;
        this.connectionState = 'disconnected';
        this.status = 'enabled';
        this.statusReason = null;
        this.connectionStateUpdatedTime = null;
        this.statusUpdatedTime = null;
        this.lastActivityTime = null;
        this.cloudToDeviceMessageCount = '0';
        this.authentication = {
            symmetricKey: {
                primaryKey: null,
                secondaryKey: null
            },
            x509Thumbprint: {
                primaryThumbprint: null,
                secondaryThumbprint: null
            }
        };
        /*Codes_SRS_NODE_SERVICE_DEVICE_16_002: [If the `deviceDescription` argument is provided as a string, it shall be parsed as JSON and the properties of the new `Device` object shall be populated with the values provided in the `deviceDescription` JSON string.]*/
        /*Codes_SRS_NODE_SERVICE_DEVICE_16_003: [If the `deviceDescription` argument if provided as an object, the properties of the new `Device` object shall be populated with the values provided in the `deviceDescription` JSON string.]*/
        if (jsonData) {
            var userProps = (typeof jsonData === 'string') ? JSON.parse(jsonData) : jsonData;
            if (!userProps.deviceId) {
                /*Codes_SRS_NODE_SERVICE_DEVICE_16_004: [The constructor shall throw a `ReferenceError` if the `deviceDescription` argument doesn't contain a `deviceId` property.]*/
                throw new ReferenceError('The \'deviceId\' property cannot be \'' + userProps.deviceId + '\'');
            }
            _.merge(this, userProps);
        }
        Object.defineProperty(this.authentication, 'SymmetricKey', {
            enumerable: true,
            get: function () {
                /*Codes_SRS_NODE_SERVICE_DEVICE_16_005: [The `authentication.SymmetricKey` property shall return the content of the `authentication.symmetricKey` property (the latter being the valid property returned by the IoT hub in the device description).]*/
                return this.symmetricKey;
            }
        });
    }
    return Device;
}());
exports.Device = Device;
//# sourceMappingURL=device.js.map</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-azure-iot-amqp-base.html">azure-iot-amqp-base</a></li><li><a href="module-azure-iot-common.html">azure-iot-common</a></li><li><a href="module-azure-iot-http-base.html">azure-iot-http-base</a></li><li><a href="module-azure-iothub.html">azure-iothub</a></li></ul><h3>Classes</h3><ul><li><a href="module-azure-iot-amqp-base.Amqp.html">azure-iot-amqp-base.Amqp</a></li><li><a href="module-azure-iot-amqp-base.AmqpMessage.html">azure-iot-amqp-base.AmqpMessage</a></li><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html">azure-iot-amqp-base.AmqpReceiver</a></li><li><a href="module-azure-iot-amqp-base.PutTokenOperation.html">azure-iot-amqp-base.PutTokenOperation</a></li><li><a href="module-azure-iot-amqp-base.PutTokenStatus.html">azure-iot-amqp-base.PutTokenStatus</a></li><li><a href="module-azure-iot-common.ArgumentError.html">azure-iot-common.ArgumentError</a></li><li><a href="module-azure-iot-common.ArgumentOutOfRangeError.html">azure-iot-common.ArgumentOutOfRangeError</a></li><li><a href="module-azure-iot-common.BadDeviceResponseError.html">azure-iot-common.BadDeviceResponseError</a></li><li><a href="module-azure-iot-common.DeviceAlreadyExistsError.html">azure-iot-common.DeviceAlreadyExistsError</a></li><li><a href="module-azure-iot-common.DeviceMaximumQueueDepthExceededError.html">azure-iot-common.DeviceMaximumQueueDepthExceededError</a></li><li><a href="module-azure-iot-common.DeviceMessageLockLostError.html">azure-iot-common.DeviceMessageLockLostError</a></li><li><a href="module-azure-iot-common.DeviceNotFoundError.html">azure-iot-common.DeviceNotFoundError</a></li><li><a href="module-azure-iot-common.DeviceTimeoutError.html">azure-iot-common.DeviceTimeoutError</a></li><li><a href="module-azure-iot-common.FormatError.html">azure-iot-common.FormatError</a></li><li><a href="module-azure-iot-common.GatewayTimeoutError.html">azure-iot-common.GatewayTimeoutError</a></li><li><a href="module-azure-iot-common.InvalidEtagError.html">azure-iot-common.InvalidEtagError</a></li><li><a href="module-azure-iot-common.InvalidOperationError.html">azure-iot-common.InvalidOperationError</a></li><li><a href="module-azure-iot-common.IoTHubSuspendedError.html">azure-iot-common.IoTHubSuspendedError</a></li><li><a href="module-azure-iot-common.Message.html">azure-iot-common.Message</a></li><li><a href="module-azure-iot-common.PreconditionFailedError.html">azure-iot-common.PreconditionFailedError</a></li><li><a href="module-azure-iot-common.SharedAccessSignature.html">azure-iot-common.SharedAccessSignature</a></li><li><a href="module-azure-iot-common.ThrottlingError.html">azure-iot-common.ThrottlingError</a></li><li><a href="module-azure-iot-common.TimeoutError.html">azure-iot-common.TimeoutError</a></li><li><a href="module-azure-iot-common.UnauthorizedError.html">azure-iot-common.UnauthorizedError</a></li><li><a href="module-azure-iot-http-base.Http.html">azure-iot-http-base.Http</a></li><li><a href="module-azure-iothub.Amqp.html">azure-iothub.Amqp</a></li><li><a href="module-azure-iothub.Client.html">azure-iothub.Client</a></li><li><a href="module-azure-iothub.Device.html">azure-iothub.Device</a></li><li><a href="module-azure-iothub.Registry.html">azure-iothub.Registry</a></li></ul><h3>Events</h3><ul><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html#event:errorReceived">azure-iot-amqp-base.AmqpReceiver#errorReceived</a></li><li><a href="module-azure-iot-amqp-base.AmqpReceiver.html#event:message">azure-iot-amqp-base.AmqpReceiver#message</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Aug 04 2017 17:09:58 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
